---
title: '[R] Use variables in RMarkdown chunk options'
author: "Zhenguo Zhang"
date: '2020-07-18'
slug: r-use-variables-in-rmarkdown-chunk-options
categories: R
tags:
- R Markdown
- R
---



<p>One can use variables as chunk options, which gives convenience
in controlling the document appearance programmatically. Normally
one need set up a variable in prior chunks to use it in current
chunk. Here is an example.</p>
<div id="the-code" class="section level2">
<h2>The code</h2>
<pre class="markdown"><code>```{r set-var, eval=F}
cat(&quot;Chunk 1&quot;)
outWid=&quot;50%&quot;  
```</code></pre>
<pre class="markdown"><code>```{r plot1, fig.cap=paste(&quot;out.width =&quot;, outWid), out.width=outWid}
cat(&quot;Chunk 2&quot;)
outWid=&quot;20%&quot;
plot(1:10)
```</code></pre>
<pre class="markdown"><code>```{r plot2, fig.cap=paste(&quot;out.width =&quot;, outWid), out.width=outWid}
cat(&quot;Chunk 3&quot;)
plot(1:10)
```</code></pre>
</div>
<div id="the-output" class="section level2">
<h2>The output</h2>
<pre class="r"><code>cat(&quot;Chunk 1&quot;)</code></pre>
<pre><code>## Chunk 1</code></pre>
<pre class="r"><code>outWid=&quot;50%&quot;</code></pre>
<pre class="r"><code>cat(&quot;Chunk 2&quot;)</code></pre>
<pre><code>## Chunk 2</code></pre>
<pre class="r"><code>outWid=&quot;20%&quot;
plot(1:10)</code></pre>
<div class="figure"><span id="fig:plot1"></span>
<img src="/post/2020-07-18-r-use-variables-in-rmarkdown-chunk-options_files/figure-html/plot1-1.png" alt="out.width = 20%" width="50%" />
<p class="caption">
Figure 1: out.width = 20%
</p>
</div>
<pre class="r"><code>cat(&quot;Chunk 3&quot;)</code></pre>
<pre><code>## Chunk 3</code></pre>
<pre class="r"><code>plot(1:10)</code></pre>
<div class="figure"><span id="fig:plot2"></span>
<img src="/post/2020-07-18-r-use-variables-in-rmarkdown-chunk-options_files/figure-html/plot2-1.png" alt="out.width = 20%" width="20%" />
<p class="caption">
Figure 2: out.width = 20%
</p>
</div>
</div>
<div id="the-conlusion" class="section level2">
<h2>The conlusion</h2>
<p>Here we change the value of the variable <em>outWid</em> by chunks and use
it to control the output width of plots.</p>
<p>In chunk 1, we set it to “50%” and use it for the 2nd chunk, and
then in the 2nd chunk we set it to “20%” and use it for the 3rd chunk.
As you see, the plot output changed accordingly.</p>
</div>
<div id="more-on-the-chunk-options" class="section level2">
<h2>More on the chunk options</h2>
<p>You may notice that the value for <em>fig.cap</em> in the 2nd chunk
actually uses the value set in the 2nd chunk (“20%” here), rather
than the value set in prior chunk. This suggests that some chunk
values settle before running its chunk (such as out.width) and some
are settled after running the chunk (such as fig.cap). So pay attention
when using variables for chunk options.</p>
<p>Happy coding. :smile:</p>
</div>
